#!/bin/sh
# 

# new header not using prereqs
if [ "$1" = "prereqs" ]; then
  echo ""
  exit 0
fi

quiet=n

. /conf/tcos.conf
. /scripts/functions
. /conf/tcos-run-functions

. /bin/set-limits

if [ $TCOS_PRINTER ]; then

  LP=""
  [ -e /dev/lp0 ] && LP=/dev/lp0
  [ -e /dev/lp1 ] && LP=/dev/lp1
  [ -e /dev/usblp0 ] && LP=/dev/usblp0

  if [ "${LP}" = "" ]; then exit 0; fi

  if [ -e /usr/bin/p910nd ]; then

     /usr/bin/p910nd -f $LP > /var/log/p910nd.log 2>&1 &

  elif [ -e /usr/bin/lp_server ]; then

     /usr/bin/lp_server -d $LP -r tcos-server > /var/log/lp_server.log 2>&1 &

  elif [ -e /usr/bin/print_server ]; then

     /usr/bin/print_server $LP > /var/log/print_server.log 2>&1 &

  fi


fi

exit 0
