#!/bin/sh
# 

quiet=n
. /conf/tcos.conf



test_intel=0
test_intel=$(lspci -n | awk '{print toupper($3)}' | grep -c -e "8086:7800" \
 -e "8086:7121" -e "8086:7123" -e "8086:7125" -e "8086:1132" \
 -e "8086:7120" -e "8086:7122" -e "8086:7124" -e "8086:1130" -e "8086:3577" \
 -e "8086:3575" -e "8086:2562" -e "8086:2560" -e "8086:3582" -e "8086:3580" \
 -e "8086:2572" -e "8086:2570" -e "8086:2582" -e "8086:2580" -e "8086:2592" \
 -e "8086:2590" -e "8086:258A" -e "8086:2580" -e "8086:2772" -e "8086:2770" \
 -e "8086:27A2" -e "8086:27A0" -e "8086:27AE" -e "8086:27AC" -e "8086:2982" \
 -e "8086:2980" -e "8086:2992" -e "8086:2990" -e "8086:29A2" -e "8086:29A0" \
 -e "8086:2972" -e "8086:2970" -e "8086:2A02" -e "8086:2A00" -e "8086:2A12" \
 -e "8086:2A10" -e "8086:29C2" -e "8086:29C0" -e "8086:29B2" -e "8086:29B0" \
 -e "8086:29D2" -e "8086:29D0" -e "8086:2A40" -e "8086:2E00" -e "8086:2E20" \
 -e "8086:2E10" -e "8086:2E32" -e "8086:2E30")

if [ -e /usr/lib/xorg/modules/drivers/intel_drv.so ]  && [ "$test_intel" != "0" ]; then
  # force intel driver (intel don't like VESA)
  configurexorg --newsettings --xdriver=intel
fi







exit 0

