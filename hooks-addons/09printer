# hooks addon for printer support

function add_lp_modules() {
   force_load parport_pc
   force_load usblp
   force_load lp
}




if [ ! $TCOS_PRINTER ] ;then
    _verbose "(09printer) TCOS_PRINTER disabled"
else
    stat_before

    if [ -e /usr/sbin/p910nd ]; then
       #/var/run/p9100d.pid, /var/lock/subsys/p9100d, /etc/hosts.allow, /etc/hosts.deny
       mkdir -p $DESTDIR/var/run
       mkdir -p $DESTDIR/var/lock/subsys
       cpifexists /usr/sbin/p910nd         /usr/bin/
       stat_after "Print server [p910nd]"

    elif [ -e /usr/bin/lp_server ]; then
       cpifexists /usr/bin/lp_server         /usr/bin/
       stat_after "Print server [lp_server]"
    else
       _echo "WARNING:"
       _echo ""
       _echo "     TCOS_PRINTER enabled but not found p910nd or lp-server packages"
       _echo "     Please install p910nd or lp-server, or disable TCOS_PRINTER support"
       _echo ""
       _echo ""
    fi

    add_lp_modules

    
fi
# end of TCOS_PRINTER
