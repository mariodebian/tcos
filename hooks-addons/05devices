# hooks addon to use terminal devices
# need autofs and ltspfs
# ltspfs
# TCOS_REMOTEFS = shfs ltspfs

if [ "$TCOS_REMOTEFS" = "ltspfs" ]; then

  if [ -d /usr/share/doc/ltspfs-client ]; then
   stat_before
   cpifexists /usr/bin/ltspfsd /usr/bin
   stat_after "LTSPFS"
  else
   echo "ERROR:"
   echo ""
   echo "Not LTSPFS support, please install ltspfs-client to build image."
   echo ""
   echo ""
  fi

elif [ "$TCOS_REMOTEFS" = "shfs" ]; then
  _echo "WARNING:"
  _echo "  SHFS support enabled, server requires shfs kernel module"
  cpifexists /etc/login.defs /etc/
fi


if [ "$TCOS_AUTOFS" ]; then
  if [ -d /usr/share/doc/autofs ]; then
   echo "ERROR"
   echo ""
   echo "No autofs support, please install autofs package."
   echo "  => apt-get install autofs"
   echo ""
  else
   # autofs
   stat_before
   cpifexists /usr/sbin/automount     /sbin/
   mkdir -p $DESTDIR/usr/lib/autofs
   copydir /usr/lib/autofs/          /usr/lib/
   mkdir -p $DESTDIR/var/run/autofs
   stat_after "Autofs mounter"
  fi
fi

